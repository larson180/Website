# Enable Rewrite Engine
RewriteEngine On

# -------------------------
# Route all requests to index.php
# -------------------------
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.php [QSA,L]

# -------------------------
# Security Hardening
# -------------------------

# Disable directory browsing
Options -Indexes

# Deny access to hidden files (.git, .env, etc.)
<FilesMatch "^\.">
    Require all denied
</FilesMatch>

# Block direct access to config files
<FilesMatch "(routes\.php|config\.php|\.env)">
    Require all denied
</FilesMatch>

# Prevent PHP execution in uploads directory
<Directory "/var/www/yourapp/public/uploads">
    <FilesMatch "\.php$">
        Require all denied
    </FilesMatch>
</Directory>
